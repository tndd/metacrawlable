# DynamicMaze Test Results

## 概要
このディレクトリには、DynamicMazeの動的ページの機能と適応性を検証する包括的なテストが含まれています。

## テスト対象

### 検証されたページ（22ページ総計）
✅ **1 ホームページ**
- `/dynamic` - DynamicMaze ホームページ（動的レイアウト）

✅ **1 ランダムページ**
- `/dynamic/random` - 完全ランダム構造ページ

✅ **20 セクションページ**
- `/dynamic/sections/1` から `/dynamic/sections/20`
- 各セクションは動的コンテンツとランダムレイアウトを持つ
- 条件付きコンテンツ（4の倍数セクションに特別コンテンツ）

## 動的機能の特徴

### ランダム性テスト
- **レイアウトバリアント**: 1-3の動的レイアウト
- **セクション順序**: ランダムに並び替えられたコンテンツ
- **サイドバー表示**: 70%の確率で表示
- **広告スロット**: 0-3個のランダム配置
- **グラデーション**: 5種類のランダム背景

### 適応性テスト
- サーバーサイドDOM変更への対応
- 動的構造の発見と解析
- 部分的サイトマップからの情報取得
- セレクター堅牢性の検証

## テスト結果
全テストが合格：
- ✅ ホームページが正しいタイトルと動的要素で読み込み
- ✅ ランダムページが異なるコンテンツを生成
- ✅ 最初の5セクションページが存在し正常に読み込み
- ✅ ナビゲーションリンクが正しく動作
- ✅ 動的要素が複数回の読み込みで変化
- ✅ 全ページがHTTP 200ステータスを返す

## テストの実行

```bash
# DynamicMazeテストのみ実行
npm run test:dynamic

# 全サイトのテスト実行
npm run test

# DynamicMazeテストレポート表示
npx playwright show-report tests/dynamic/result/latest/reports/html

# 統合テストレポート表示
npm run test:report
```

## テスト出力構造
```
tests/
├── dynamic/
│   ├── pages.spec.ts     # テストファイル
│   ├── README.md         # このドキュメント
│   └── result/           # テスト結果（git無視）
│       └── {timestamp}/  # タイムスタンプ付きテスト実行
│           ├── artifacts/    # スクリーンショット、動画、トレース
│           └── reports/      # HTMLとJSONレポート
│               ├── html/     # HTMLテストレポート
│               └── results.json
└── static/               # StaticLandテスト
    └── result/
        └── {timestamp}/  # StaticLandタイムスタンプ結果
```

## テストの制限事項

### ランダム性による制約
- **確率的失敗**: 動的要素の変化テストはランダム性により稀に失敗する可能性
- **最小限テスト**: 22ページ中5ページのみテスト（パフォーマンス考慮）
- **要素干渉**: フローティング要素によるクリック阻害への対応

### 対処法
- **First()セレクター**: 複数要素の厳密モード違反を回避
- **直接URL遷移**: クリック干渉問題を回避
- **フィルター使用**: 特定テキストの要素を確実に選択

## テストフレームワーク
- **Playwright** - エンドツーエンドテストフレームワーク
- **TypeScript** - 型安全なテスト定義
- **Chromium** - テスト用ブラウザエンジン

このテストは、DynamicMazeがMetaCrawlableプロジェクトの動的コンテンツ適応性仕様を満たすことを検証します。